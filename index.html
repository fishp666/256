<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>倒计时</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100vw; height: 100vh;
      background: #fff;
      font-family: huangyou, sans-serif;
      color: #333;
      box-sizing: border-box;
    }
    .container {
      width: 100vw;
      min-height: 100vh;
      box-sizing: border-box;
      padding: 3vw 4vw 6vw 4vw;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
    }
    .title {
      text-align: center;
      font-size: 4vw;
      font-weight: bold;
      margin-bottom: 6vw;
      letter-spacing: 0.5vw;
    }
    .countdown-item {
      display: flex;
      align-items: center;
      margin-bottom: 4vw;
      width: 100%;
    }
    .cd-label {
      width: 15vw;
      min-width: 80px;
      font-size: 2vw;
      text-align: right;
      margin-right: 2vw;
    }
    .cd-progress {
      flex: 1;
      height: min(2.5vw, 40px); /* 屏幕宽度的 2.5%，最大不超过 40 像素 */
      min-height: 16px;
      background: #eee;
      border-radius: 100px;
      margin: 0 2vw;
      overflow: hidden;
      position: relative;
    }
    .cd-bar {
      background: linear-gradient(90deg, #2196f3 60%, #42a5f5 100%);
      height: 100%;
      border-radius: 100px;
      transition: width 0.3s;
      position: absolute;
      left: 0; top: 0;
    }
    .cd-info {
      width: 22vw;
      min-width: 120px;
      font-size: 1.5vw;
      color: #333;
      text-align: left;
      word-break: break-all;
      line-height: 1.5;
    }
    .cd-info strong {
      color: #e91e63;
      font-size: 2vw;
    }
    @media (max-width: 700px) {
      .title { font-size: 7vw; }
      .cd-label { font-size: 4vw; min-width: 55px;}
      .cd-info { font-size: 3.2vw; min-width: 80px;}
      .cd-progress { height: 20px; min-height: 10px;}
      .cd-info strong { font-size: 4vw;}
    }
    @media (max-width: 450px) {
      .title { font-size: 9vw; }
      .cd-label { font-size: 5vw; min-width: 38px;}
      .cd-info { font-size: 4vw; min-width: 60px;}
      .cd-progress { height: 12px; min-height: 6px;}
      .cd-info strong { font-size: 5vw;}
    }
    /* 这里是美化滚动条 */
    ::-webkit-scrollbar { width: 6px; background: #f0f0f0;}
    ::-webkit-scrollbar-thumb { background: #b0d4f9; border-radius: 6px;}
  </style>
</head>
<body>
  <div class="container" id="root">
    <div class="title">倒计时</div>
    <div class="countdown-item" v-for="item in countdowns" :key="item.name">
      <div class="cd-label">{{item.name}}</div>
      <div class="cd-progress">
        <div class="cd-bar" :style="{width: item.progress+'%'}"></div>
      </div>
      <div class="cd-info">
        <strong>{{item.remainStr}}</strong>
        <br>
        / {{item.targetDateStr}}
        <br>
        已用 {{item.usedDays}} 天 / 共 {{item.totalDays}} 天（{{item.progress}}%）
      </div>
    </div>
  </div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.min.js"></script>
<script>
function pad(num) { return num < 10 ? '0' + num : num; }
function formatRemain(ms) {
  if (ms < 0) ms = 0;
  var days = Math.floor(ms / (24*60*60*1000));
  ms %= (24*60*60*1000);
  var hours = Math.floor(ms / (60*60*1000));
  ms %= (60*60*1000);
  var minutes = Math.floor(ms / (60*1000));
  ms %= (60*1000);
  var seconds = Math.floor(ms / 1000);
  return `${days}天 ${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
}
function formatDateStr(date) {
  var d = new Date(date);
  return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
}
new Vue({
  el: "#root",
  data() {
    return {
      // 起始日默认用字符串，否则脑残 vue 会出问题
      created: (new Date()).toISOString().slice(0, 10), // '2025-04-29'

      countdownList: [
        { name: "中考", target: "2025/06/20 00:00:00" },
        { name: "高考", target: "2026/06/07 00:00:00" },
        { name: "2025年元旦", target: "2025/01/01 00:00:00" }
      ],
      countdowns: []
    }
  },
  methods: {
    updateCountdowns() {
      var now = new Date();
      this.countdowns = this.countdownList.map(item => {
        var targetDate = new Date(item.target);
        var createdDate = new Date(this.created);
        var remainMs = targetDate - now;
        var totalMs = targetDate - createdDate;
        var usedMs = now - createdDate;
        // 防止目标日已过或起始日错误
        var progress = totalMs > 0
          ? Math.min(100, Math.max(0, (usedMs / totalMs * 100).toFixed(2)))
          : (remainMs <= 0 ? 100 : 0);
        return {
          name: item.name,
          remainStr: formatRemain(remainMs),
          targetDateStr: formatDateStr(targetDate),
          progress: progress,
          usedDays: Math.max(0, Math.floor(usedMs/(24*60*60*1000))),
          totalDays: Math.max(1, Math.floor(totalMs/(24*60*60*1000)))
        }
      });
    }
  },
  mounted() {
    this.updateCountdowns();
    setInterval(this.updateCountdowns, 1000);
  }
})
</script>
</body>
</html>
